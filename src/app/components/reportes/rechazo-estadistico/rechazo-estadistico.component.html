<div class="row">
	<div class="col-sm-2">
		<!--
<form #buscaForm="ngForm">
  -->
		<form #buscaForm="ngForm" (submit)="resetFiltros()" *ngIf="!oculta">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<div class="row">
						<div class="col-sm-6">
							<h4>{{titulo}}</h4>
						</div>
						<div class="col-sm-6 text-right">
				
							<button (click)="Oculta()" class="btn btn-primary btn-sm">
					       <span class="glyphicon glyphicon-filter" aria-hidden="true"></span>
					       </button>
					           </div>
					         </div>
								</div>
				<div class="panel-body">
					<div class="form-group">
						<input class="form-control" type="text" name="busca"  [(ngModel)]="buscaform"
          placeholder="Código"  >
        </div>
        <div class="form-group">
          <input class="form-control" type="text" name="Blote"  [(ngModel)]="Blote"
          placeholder="Lote"  >
        </div>
        <div class="form-group">
            <label>Estatus</label>
              <select class="form-control" name="color" #color="ngModel" [(ngModel)]="estatus" required>
              <option>Aprobada</option>
              <option>Pendiente</option>
              <option>Pasta</option>
              </select>
          </div>
        <div class="form-group">
          <label>Fecha de inicio </label>
          <input class="form-control" type="date" name="fecha" [(ngModel)]="fecha"
          placeholder="Fecha inicio"  >
        </div>
        <div class="form-group">
          <label>Fecha de final </label>
          <input class="form-control" type="date" name="fechaterm" [(ngModel)]="fechatermino"
          placeholder="Fecha termino" >
        </div>
        <div class="form-group">
          <input class="form-control" type="text" name="codR"  [(ngModel)]="codRan"
          placeholder="Código inicio">
        </div>
        <div class="form-group">
          <input class="form-control" type="text" name="codRFin"  [(ngModel)]="codRanFin"
          placeholder="Código final">
        </div>
        
       <input type="submit" value="Borrar Filtros" class="btn btn-lg btn-danger btn-block" />
       
        <!--
         <button 
        class="btn btn-lg btn-danger btn-block" 
         (click)="resetFiltros(buscaForm)">Borrar filtros
        </button>
         -->
  </div>
      </div>
      </form>
      <form #buscaForm="ngForm" *ngIf="oculta">
  <div class="panel panel-primary">
	<div class="panel-heading">
		<div class="row">
			<div class="col-sm-6">
				<h4>{{titulo3}}</h4>
			</div>
			<div class="col-sm-6 text-right">
	
				<button (click)="Oculta()" class="btn btn-primary btn-sm">
	       <span class="glyphicon glyphicon-filter" aria-hidden="true"></span>
	       </button>
	           </div>
	         </div>
	       </div>
       <div class="panel-body">
         <div class="form-group">
         <label class="form-control" *ngIf=formulas >Total formulas: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | totalFormulas }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Total análisis: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | sumaAnalisis: 'ncambios' }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Total rechazos: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | sumaR: 'rechazos' }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Promedio de análisis: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | promeR: 'rechazos' }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Bien a la primera: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | bienPrimera }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Bien a la primera: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | bienPrimeraPorcen }} %</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Bien a la segunda: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | bienSegunda }}</label>		  
        </div>
        <div class="form-group">
         <label class="form-control" *ngIf=formulas >Bien a la segunda: {{ formulas | buscar:buscaform | buscaLote: Blote | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino |  codRan: codRan   | codRanFin: codRanFin | estatus: estatus | bienSegundaPorcen }} %</label>		  
        </div>
  </div>
      </div>
      </form>
  </div>
     <div class="col-lg-10">
       <div class="panel panel-primary">
          <div class="panel-heading">
     <h4>{{titulo2}} <strong></strong></h4>
       </div>
       <div class="panel-body">
         <!-- esta clase hace que la tabla se haga resonsiva y pone el scroll lateral -->
         <div class="table-responsive">
      <table class="table table-hover">
        <!--cabecera de la tabla -->
        <thead class="thead-default">
            <!--fila de la cabecera -->
            <tr>
                <!--elementos de la cabe -->
                <th>Código</th>
                <th>Lote</th>
                <th>Rechazos</th>
            </tr>
        </thead>
        <!--creamos cuerpo de tabla -->
        <tbody>
          <tr *ngFor="let formula of formulas | buscar: buscaform | buscaLote: Blote | estatus: estatus | buscaElaborado: Belaborado | fecha: fecha | fechaterm: fechatermino | codRan: codRan | codRanFin: codRanFin">
                <td>{{ formula.codigo }}</td>
                <td>{{ formula.lote }}</td>
                <td>
                  <span *ngIf="formula.status == 'Pasta'">
                    <a href="#muestra-{{formula._id}}" class="btn btn-outline-primary" role="button" data-toggle="modal" style="border: 1px solid #337ab7;">
                      <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span>
                    </a>
                  </span>
                  <span *ngIf="formula.rechazos == 0 && formula.status != 'Pasta'">
                    <a href="#muestra-{{formula._id}}" class="btn btn-outline-success" role="button" data-toggle="modal" style="border: 1px solid #4CAF50;">
                      <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
                    </a>
                  </span>
                  <span *ngIf="formula.rechazos == 1 || formula.rechazos == 2">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="10" 
                        [ngStyle]="{ 'width': formula.rechazos*10 + '%' }" data-toggle="modal" data-target="#exampleModal">
                        <a href="#muestra-{{formula._id}}" class="btn btn-success" role="button" data-toggle="modal">
                          {{ formula.rechazos }}
                        </a>  
                      </div>     
                     </div>
                  </span>
                  <span *ngIf="formula.rechazos == 3 || formula.rechazos == 5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="10" 
                      [ngStyle]="{ 'width': formula.rechazos*10 + '%' }">
                      
                      <a href="#muestra-{{formula._id}}" class="btn btn-warning" role="button" data-toggle="modal">
                          {{ formula.rechazos }}
                        </a>  
                      </div>     
                    </div>
                  </span>
                  <span *ngIf="formula.rechazos == 6 || formula.rechazos == 10">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="10" 
                      [ngStyle]="{ 'width': formula.rechazos*10 + '%' }">
                     
                      <a href="#muestra-{{formula._id}}" class="btn btn-danger" role="button" data-toggle="modal">
                          {{ formula.rechazos }}
                        </a>  
                      </div>     
                    </div>
                  </span>
				<!-- Modal -->
				<div class="modal" id="muestra-{{formula._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalCenterTitle">Comentarios de ajustes</h5>
							</div>
							<div class="modal-body">
								<div class="table-responsive">
									<table class="table table-hover">
										<thead class="thead-default">
											<tr>
												<th>1 Evaluación</th>
												<th>2 Evaluación</th>
												<th>3 Evaluación</th>
												<th>4 Evaluación</th>
												<th>5 Evaluación</th>
												<th>6 Evaluación</th>
												<th>7 Evaluación</th>
												<th>8 Evaluación</th>
												<th>9 Evaluación</th>
												<th>10 Evaluación</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>{{ formula.c1 }}</td>
												<td>{{ formula.c2 }}</td>
												<td>{{ formula.c3 }}</td>
												<td>{{ formula.c4 }}</td>
												<td>{{ formula.c5 }}</td>
												<td>{{ formula.c6 }}</td>
												<td>{{ formula.c7 }}</td>
												<td>{{ formula.c8 }}</td>
												<td>{{ formula.c9 }}</td>
												<td>{{ formula.c10 }}</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
				                            </div>
				                          </div>
				                        </div>
				                      </div>
                </td>
            </tr>
        </tbody>
    </table>
         </div>
       </div>
       </div>
     </div>
</div>